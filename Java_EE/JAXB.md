# Introduction to JAXB #
1. JAXB: Java Architecture for XML Binding.
	1. It is a fast way to combine XML Schemas and Java representations
2. Used for incorporating XML data processing in Java applications.
3. Methods in JAXB:
	1. Unmarshalling (reading) XML documents into Java content trees
	2. Marshalling (writing) Java content trees back into XML docs
	3. Way to generate XML schema from Java objects
4. Support:
	1. All W3C XML Schema features
	2. Binding Java-to-XML with addition of `javax.xml.bind.annotation` to control binding
	3. Reduction in number of generated schema-derived classes.
	4. Validation capabilities through JAXP validation APIs
	5. Smaller runtime libraries 

## JAXB Architecture ##
1. Components and interactions in JAXB processing model.

### Architectural Overview ###
1. JAXB Architectural Overview:

	![jaxb-overview.gif](jaxb-overview.gif)

	1. Components:
		1. Schema compiler: Binds source schema to set of schema-derived program elements. 
			1. XML-based binding language describes the binding
		2. Schema generator: Maps set of program elements to a derived schema.
			1. Program annotations describe the mapping
		3. Binding runtime framework: Provides unmarshalling (reading) and marshalling (writing) operations for 
			1. accessing XML content
			2. manipulating XML content
			3. validating XML content

### The JAXB Binding Process ###
1. Steps in JAXB Binding Process:

	![jaxb-dataBindingProcess.gif](jaxb-dataBindingProcess.gif)

2. Steps for JAXB data binding:
	1. Generate classes: XML schema is input to JAXB binding compiler to generate JAXB classes based on the schema.
	2. Compile classes: All generated classes, source files and app code must be compiled.
	3. Unmarshal: XML documents which are written according to constraints in source schema are unmarshalled by JAXB binding framework.
		1. JAXB supports unmarshalling XML data from sources other than files and documents like:
			1. DOM nodes
			2. String buffers
			3. SAX sources
			4. ...
	4. Generate content tree: Unmarshalling generates content tree of data objects instantiated from generated JAXB classes.
		1. Content tree: represents structure and content of source XML documents.
	5. Validate (optional): Unmarshalling involves validation of source XML documents before generating content tree.
		1. If changes are made to content tree, JAXB validation can be applied before marshalling content back to XML document.
	6. Process content: Client app can modify XML data represented by content tree through interfaces generated by binding compiler.
	7. Marshal: Processed content tree is marshalled to one or more XML output docs.
		1. Content can be validated before marshalling.

### More About Unmarshalling ###
1. Unmarshalling: gives client app the ability to convert XML data into JAXB-derived Java objects.

### More About Marshalling ###
1. Marshalling: gives the ability to convert JAXB-derived Java object tree into XML data.
	1. Marshaller uses UTF-8 encoding by default when generating XML data.
2. Client need not validate content tree before marshalling.
3. Content tree is not required to be valid wrt original schema in order to marshal XML data

### More About Validation ###
1. Validation: Process of verifying that XML document meets all constraints expressed in schema.
	1. JAXB 1.0: provides validation at unmarshal time
		1. On-demand validation on content tree.
	2. JAXB 2.0: allows validation at unmarshal and marshal time (web service processing model - be lax in reading data and strict on writing data)

## Representing XML Content ##
1. How does JAXB represent XML content as Java objects?

### Java Representation of XML Schema ###
1. JAXB supports grouping of generated classes in Java packages.
	1. Package contents:
		1. Java class name is derived from XML element name (or specified by binding customization)
		2. `ObjectFactory` class: Factory used to return instances of bound Java class.

## Binding XML Schemas ##
1. Default XML-to-Java bindings sued by JAXB.
	1. Custom binding declarations: used to override them globally or case by case
	2. [JAXB Specification](http://jaxb.java.net/)

### Simple Type Definitions ###
1. Schema component (using simple type definition) typically binds to Java property.
2. Java properties attributes include:
	1. Base type
	2. Collection type, if any
	3. Predicate

### Default Data Type Bindings ###
1. Schema to java (JAXBElement) and java to schema bindings:

#### Schema-to-Java Mapping ####
1. Mapping of XML data types to Java data types in JAXB
	1. `xsd:string`: `java.lang.String`
	2. `xsd:integer`: `java.math.BigInteger`
	3. `xsd:int`: `int`
	4. `xsd:long`: `long`
	5. `xsd:short`: `short`
	6. `xsd:decimal`: `java.math.BigDecimal`
	7. `xsd:float`: `float`
	8. `xsd:double`: `double`
	9. `xsd:boolean`: `boolean`
	10. `xsd:byte`: `byte`
	11. `xsd:QName`: `javax.xml.namespace.QName`
	12. `xsd:dateTime`: `javax.xml.datatype.XMLGregorianCalendar`
	13. `xsd:base64Binary`: `byte[]`
	14. `xsd:hexBinary`: `byte[]`
	15. `xsd:unsignedInt`: `long`
	16. `xsd:unsignedShort`: `int`
	17. `xsd:unsignedByte`: `short`
	18. `xsd:time`: `javax.xml.datatype.XMLGregorianCalendar`
	19. `xsd:date`: `javax.xml.datatype.XMLGregorianCalendar`
	20. `xsd:g`: `javax.xml.datatype.XMLGregorianCalendar`
	21. `xsd:anySimpleType`: `java.lang.Object`
	22. `xsd:anySimpleType`: `java.lang.String`
	23. `xsd:duration`: `javax.xml.datatype.Duration`
	24. `xsd:NOTATION`: `javax.xml.namespace.QName` 

#### JAXBElement Object ####
1. `JAXBElement`: An object of the class is provided when XML element info cannot be inferred by derived Java representation
	1. It has methods to get and set object anme and object value

#### Java-to-Schema Mapping ####
1. Default mapping of Java classes to XML data types
	1. `java.lang.String`: `xs:string`
	2. `java.math.BigInteger`: `xs:integer`
	3. `java.math.BigDecimal`: `xs:decimal`
	4. `java.util.Calendar`: `xs:dateTime`
	5. `java.util.Date`: `xs:dateTime`
	6. `javax.xml.namespace.QName`: `xs:QName`
	7. `java.net.URI`: `xs:string`
	8. `javax.xml.datatype.XMLGregorianCalendar`: `xs:anySimpleType`
	9. `javax.xml.datatype.Duration`: `xs:duration`
	10. `java.lang.Object`: `xs:anyType`
	11. `java.awt.Image`: `xs:base64Binary`
	12. `javax.activation.DataHandler`: `xs:base64Binary`
	13. `javax.xml.transform.Source`: `xs:base64Binary`
	14. `java.util.UUID`: `xs:string`

## Customizing Generated Classes and java Program Elements ##
1. How to customize generated JAXB classes and Java program elements.

### Schema-to-Java ###
1. Custom JAXB binding declarations: Used to customize generated JAXB classes
	1. It is done beyond XML-specific constraints in XML Schema to include java-specific refinements (like class and packagge name mappings)
2. Two ways to customize XML Schema:
	1. Inline annotations in source XML schema
	2. Declarations in external binding [customization] file that is passed to JAXB binding compiler

### Java-to-Schema ###
1. `javax.xml.bind.annotation`: JAXB annotations are defined in this package which can be used to customize Java program elements to XML schema mapping.
2. JAXB annotations that can be used with Java package:
	1. `@XmlSchema`: Maps package to XML target namespace. Default settings:

			@XmlSchema (
				xmlns = {},
				namespace = "",
				elementFormDefault = XmlNsForm.UNSET,
				attributeFormDefault = XmlNsForm.UNSET
			)

	2. `@XmlAccessorType`: Controls default serialization of fields and properties. Default settings:

			@XmlAccessorType (
				value = AccessType.PUBLIC_MEMBER
			)

	3. `@XmlAccessorOrder`: Controls default ordering of properties and fields mapped to XML elements. Default settings:
	
			@XmlAccessorOrder (
				value = AccessorOrder.UNDEFINED
			)

	4. `@XmlSchemaType`: Allows customized mapping to XML schema built-in type. Default settings:

			@XmlSchemaType (
				namespace = "http://www.w3.org/2001/XMLSchema",
				type = DEFAULT.class
			)

	5. `@XmlSchemaTypes`: Container annotation for defining multiple `@XmlSchemaType` annotations. Default settings: None
3. JAXB annotations that can be used with Java classes:
	1. `@XmlType`: Maps Java class to schema type. Default settings:

			@XmlType (
				name = "##default",
				propOrder = {""},
				namespace = "##default",
				factoryClass = DEFAULT.class,
				factoryMethod = ""
			)

	2. `@XmlRootElement`: Associates global element with schema type to which class is mapped. Default settings:

			@XmlRootElement (
				name = "##default",
				namespace = "##default"
			)

3. JAXB annotations associated with Java Class
	1. `@XmlType`: Maps Java class to a schema type. Default settings:

			@XmlType (
				name = "##default",
				propOrder = {""},
				namespace = "##default",
				factoryClass = DEFAULT.class,
				factoryMethod = ""
			)

	2. `@XmlRootElement`: Associates global element with schema type to which class is mapped
			
			@XmlRootElement (
				name = "##default",
				namespace = "##default"
			)

4. JAXB Annotations Associated with a Java `enum` Type
	1. `@XmlEnum`: Maps Java type to an XML simple type. Default settings:

			@XmlEnum ( value = String.class)

	2. `@XmlEnumValue`: Maps a Java type to an XML simple type. Default settings: None
	3. `@XmlType`: Maps Java class to a schema type. Default settings:

			@XmlType (
				name = "##default",
				propOrder = {""},
				namespace = "##default",
				factoryClass = DEFAULT.class,
				factoryMethod = ""
			)

	4. `@XmlRootElement`: Associates global element with schema type to which class is mapped. Default settings:

			@XmlRootElement (
				name = "##default",
				namespace = "##default"
			)

5. JAXB annotations that can be used with Java properties and fields.


## Basic Examples ##
## Customizing JAXB Bindings ##
## Java-to-Schema Examples ##
## For More Information ##